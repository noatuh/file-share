<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Simple Share — Upload</title>
  <style>
    body { font-family: sans-serif; max-width: 700px; margin: 40px auto; }
    .row { display: flex; gap: 8px; align-items: center; }
    .msg { margin-top: 10px; }
  </style>
</head>
<body>
  <h1>Upload files</h1>
  <form id="upForm">
    <input type="file" id="files" name="files" multiple>
    <button type="submit">Upload</button>
  </form>
  <div class="msg" id="msg"></div>
  <p><a href="/downloads.html">Go to downloads »</a></p>

  <script>
    const form = document.getElementById('upForm');
    const filesInput = document.getElementById('files');
    const msg = document.getElementById('msg');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();
      if (!filesInput.files.length) {
        msg.textContent = "Pick at least one file.";
        return;
      }
      const fd = new FormData();
      for (const f of filesInput.files) fd.append('files', f);
      const r = await fetch('/api/upload', { method: 'POST', body: fd });
      if (!r.ok) { msg.textContent = "Upload failed."; return; }
      const j = await r.json();
      msg.textContent = `Uploaded ${j.saved} file(s).`;
      filesInput.value = '';
    });
  </script>
</body>
</html>
